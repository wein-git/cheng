
# Generated by iptables-save v1.4.21 on Thu Jun 13 10:16:14 2019
*filter
:INPUT DROP [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [371:138823]
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 21 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 8080 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 3690 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 443 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 801 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 802 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 3000:3005 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 10080 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 10081 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 10088 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 10089 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 6379 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 803 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 5920 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 8087 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A FORWARD -j REJECT --reject-with icmp-host-prohibited
COMMIT
# Completed on Thu Jun 13 10:16:14 2019

iptables-save > /etc/sysconfig/iptables 保存
iptables-restore < /etc/sysconfig/iptables  还原规则

https://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.20.tar.gz
# iptables -t filter -A INPUT -p tcp -s 192.168.211.11 -j ACCEPT
# iptables -t filter -A INPUT -p tcp -j REJECT

删除的方法：
iptables -t filter -D  INPUT -s 192.168.211.11  -p icmp -j ACCEPT

iptables -nL --line  在规则输出的格式上加入行号。		
# iptables  -D INPUT  2   在INPUT组中，删除第二条规则


下面我只打开22端口，看我是如何操作的，就是下面2个语句
server001
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT
iptables -A INPUT -p tcp -m multiport --dport 80,10080,20,21,3000:3005 -j ACCEPT
iptables -A OUTPUT -p tcp -m multiport --sport 80,10080,20,21,3000:3005 -j ACCEPT


# iptables -F		--清空防火墙规则
# systemctl stop firewalld	--停止firewalld服务
# systemctl disable firewalld	--关闭firewall服务开机自启动



